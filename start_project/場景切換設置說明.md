# 場景切換設置說明

本說明將指導您如何在Cocos Creator中設置主菜單和遊戲場景的切換功能。

## 📁 場景結構

您需要創建兩個場景：

1. **主菜單場景** (menu.fire)
2. **遊戲場景** (game.fire) - 現有場景

## 🎯 第一步：創建主菜單場景

### 1. 創建新場景

1. 在Cocos Creator中，右鍵點擊 `assets` 資料夾
2. 選擇 `新建` → `場景`
3. 命名為 `menu`

### 2. 設計主菜單UI

在menu場景中添加以下節點：

```
Canvas (根節點)
├── Background (背景圖片)
├── TitleLabel (遊戲標題)
├── StartButton (開始遊戲按鈕)
└── ExitButton (退出按鈕) [可選]
```

### 3. 設置MenuScene組件

1. 選擇Canvas節點
2. 添加 `MenuScene` 組件
3. 設置屬性：
   - `Btn Start Game`: 拖拽開始遊戲按鈕
   - `Btn Exit`: 拖拽退出按鈕 (可選)
   - `Label Title`: 拖拽標題文字 (可選)
   - `Menu BGM`: 拖拽背景音樂 (可選)

## 🎮 第二步：修改遊戲場景

### 1. 更新Game場景UI

在現有的game場景中添加：

```
Canvas
├── [現有節點保持不變]
├── UI層
│   ├── MenuButton (返回菜單按鈕)
│   └── RestartButton (重新開始按鈕)
```

### 2. 設置Game組件屬性

選擇Canvas節點，在Game組件中設置：

- `Btn Menu`: 拖拽返回菜單按鈕
- `Btn Restart`: 拖拽重新開始按鈕

## ⚙️ 第三步：構建設置

### 1. 場景構建順序

在 `項目設置` → `項目預覽` → `參與構建場景` 中：

```
0. menu (主菜單場景 - 設為啟動場景)
1. game (遊戲場景)
```

### 2. 設置啟動場景

- 確保 `menu` 場景被設置為第一個場景
- 這樣遊戲啟動時會先顯示主菜單

## 🎨 第四步：UI設計建議

### 主菜單場景 (menu)

```
按鈕樣式建議：
- 開始遊戲按鈕：大、醒目、使用 btn_play.png
- 退出按鈕：小一些，放在角落
- 背景：使用 background.jpg

標題設計：
- 字體：mikado_outline_shadow
- 文字：「跳躍收集星星」
- 位置：畫面上方
```

### 遊戲場景按鈕

```
位置建議：
- 返回菜單按鈕：左上角
- 重新開始按鈕：右上角
- 遊戲結束時顯示在畫面中央
```

## 🔧 第五步：按鈕事件設置

### MenuScene按鈕

- 開始遊戲：切換到 `game` 場景
- 退出遊戲：關閉應用 (網頁版無效果)

### Game場景按鈕

- 返回菜單：切換到 `menu` 場景
- 重新開始：重新載入 `game` 場景
- 遊戲結束時顯示選項

## 🎵 第六步：音效設置 (可選)

### 主菜單背景音樂

- 在MenuScene組件中設置 `Menu BGM`
- 建議使用循環播放的背景音樂

### 場景切換時

- 自動停止前一個場景的音樂
- 載入新場景的音效

## 📱 第七步：測試流程

1. **啟動測試**：確保遊戲從主菜單開始
2. **場景切換**：測試所有按鈕的場景切換功能
3. **數據持久化**：確保最高分數被正確保存
4. **音效測試**：檢查場景切換時的音效處理

## 🚀 完成後的遊戲流程

```
遊戲啟動 → 主菜單場景 → 點擊開始 → 遊戲場景
    ↑                                        ↓
    ←──────── 點擊返回菜單 ←──── 遊戲結束 ←────
                                            ↓
                               點擊重新開始 → 重載遊戲場景
```

## ⚠️ 注意事項

1. **場景命名**：確保場景文件名與代碼中的場景名稱一致
2. **組件綁定**：確保所有按鈕都正確綁定到相應的屬性
3. **節點命名**：建議使用有意義的節點名稱便於管理
4. **性能優化**：大型場景切換時可能需要添加loading畫面

## 🔍 故障排除

### 場景切換失敗

- 檢查場景名稱是否正確
- 確認場景已添加到構建設置中

### 按鈕無響應

- 檢查按鈕的 `Button` 組件是否正確設置
- 確認事件監聽是否正確綁定

### 數據丟失

- 檢查 `SceneManager` 是否正確初始化
- 確認本地存儲功能是否正常工作

完成這些設置後，您的遊戲就擁有了完整的場景切換功能！
